---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-gateway
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gateway
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: gateway
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-gwc
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gwc
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: gwc
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-rest
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: rest
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: rest
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-wcs
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wcs
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wcs
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-webui
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: webui
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: webui
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-wfs
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wfs
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wfs
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: gs-cloud-datadir-geoserver-wms
  labels:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wms
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wms
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-gateway
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gateway
    one-custom-label: my-label
  annotations:
    my-custom-annotation: hello
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gateway
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-gwc
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gwc
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gwc
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-rest
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: rest
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: rest
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-wcs
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wcs
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wcs
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-webui
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: webui
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: webui
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-wfs
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wfs
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wfs
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gs-cloud-datadir-geoserver-wms
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wms
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  selector:
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wms
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-gateway
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gateway
spec:
  replicas: 1
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: gateway
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: gateway
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-gateway:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-gwc
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: gwc
spec:
  replicas: 2
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: gwc
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: gwc
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-gwc:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-rest
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: rest
spec:
  replicas: 1
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: rest
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: rest
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-rest:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-wcs
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wcs
spec:
  replicas: 1
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wcs
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: wcs
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-wcs:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-webui
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: webui
spec:
  replicas: 1
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: webui
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: webui
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-webui:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-wfs
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wfs
spec:
  replicas: 2
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wfs
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: wfs
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-wfs:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gs-cloud-datadir-geoserver-wms
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: wms
spec:
  replicas: 2
  revisionHistoryLimit: 3
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: geoserver
      app.kubernetes.io/instance: gs-cloud-datadir
      app.kubernetes.io/component: wms
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geoserver
        app.kubernetes.io/instance: gs-cloud-datadir
        app.kubernetes.io/component: wms
    spec:
      serviceAccountName: default
      securityContext:
        {}
      affinity:
        null
      containers:
        - name: spring
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          image: "geoservercloud/geoserver-cloud-wms:1.0.3"
          imagePullPolicy: IfNotPresent
          env:
            - name: "APP_KUBERNETES_IO_COMPONENT"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/component']
            - name: "APP_KUBERNETES_IO_INSTANCE"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/instance']
            - name: "APP_KUBERNETES_IO_NAME"
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app.kubernetes.io/name']
            - name: "GEOSERVER_BASE_PATH"
              value: /geoserver-cloud
            - name: "GEOTOOLS_HTTPCLIENT_PROXY_ENABLED"
              value: "false"
            - name: "GEOWEBCACHE_CACHE_DIR"
              value: /mnt/cache
            - name: "GWC_ENABLED"
              value: "true"
            - name: "JAVA_OPTS_DEFAULT"
              value: -DALLOW_ENV_PARAMETRIZATION=true -XX:MaxRAMPercentage=80 -XX:InitialRAMPercentage=80
            - name: "RABBITMQ_HOST"
              value: gs-cloud-common-rabbitmq
            - name: "RABBITMQ_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "gs-cloud-common-rabbitmq"
                  key: "rabbitmq-password"
            - name: "RABBITMQ_USER"
              value: geoserver
            - name: "SPRING_PROFILES_ACTIVE"
              value: standalone,datadir
            - name: "JAVA_OPTS"
              value: $(JAVA_OPTS_DEFAULT) -Dspring.config.additional-location=optional:file:/custom/geodata/jndi.yml
            - name: "TARGETS_GWC"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-gwc:8080
            - name: "TARGETS_REST"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-rest:8080
            - name: "TARGETS_WCS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wcs:8080
            - name: "TARGETS_WEBUI"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-webui:8080
            - name: "TARGETS_WFS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wfs:8080
            - name: "TARGETS_WMS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wms:8080
            - name: "TARGETS_WPS"
              value: http://$(APP_KUBERNETES_IO_INSTANCE)-$(APP_KUBERNETES_IO_NAME)-wps:8080
          terminationMessagePolicy: FallbackToLogsOnError
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 0.1
              memory: 512Mi
          volumeMounts:
            - mountPath: /custom/geodata
              name: geodata
              readOnly: true
            - mountPath: /etc/localconfig
              name: vol-local-gscloud
            - mountPath: /mnt/cache
              name: cache
            - mountPath: /opt/app/data_directory
              name: datadir
            - mountPath: /tmp/
              name: tmp-empty-dir

          ports:
            - name: health
              containerPort: 8081
              hostIP: 127.0.0.1
            - name: http
              containerPort: 8080
              hostIP: 127.0.0.1

          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /actuator/health/liveness
              port: health
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: health
            periodSeconds: 5
      volumes:
        - name: cache
          persistentVolumeClaim:
            claimName: gs-cloud-gwc-cache-nfs-claim
        - name: datadir
          persistentVolumeClaim:
            claimName: gs-cloud-datadir-nfs-claim
        - name: geodata
          configMap:
            name: cm-jndi-geodata
        - name: tmp-empty-dir
          emptyDir: {}
        - name: vol-local-gscloud
          emptyDir: {}
---
# Source: gs-cloud-datadir/charts/geoservercloud/charts/geoserver/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: gs-cloud-datadir-geoserver-host1
  labels:
    helm.sh/chart: geoserver
    app.kubernetes.io/version: "1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: geoserver
    app.kubernetes.io/instance: gs-cloud-datadir
    app.kubernetes.io/component: main
  annotations:
    my-annotation: coucou
spec:
# Add tls only if ingress.tls.enabled is set to true and the other fields are complete.
  rules:
    - host: "gscloud.local"
      http:
        paths:
          - path: "/geoserver-cloud/"
            pathType: Prefix
            backend:
              service:
                name: gs-cloud-datadir-geoserver-gateway
                port:
                  number: 8080
